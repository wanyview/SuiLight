<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†äº«çŸ¥è¯†èƒ¶å›Š ğŸ”—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="max-w-2xl mx-auto px-4 py-8">
        <!-- è¿”å›é“¾æ¥ -->
        <div class="text-center mb-8">
            <a href="/" class="text-white/80 hover:text-white text-sm">â† è¿”å› SuiLight çŸ¥è¯†æ²™é¾™</a>
        </div>

        <!-- åˆ†äº«å¡ç‰‡ -->
        <div class="bg-white rounded-2xl shadow-2xl p-8">
            <div class="text-center mb-8">
                <div class="text-5xl mb-4">ğŸ“¦</div>
                <h1 class="text-2xl font-bold text-gray-800" id="capsule-title">çŸ¥è¯†èƒ¶å›Š</h1>
                <p class="text-gray-500 mt-2" id="capsule-desc">åŠ è½½ä¸­...</p>
            </div>

            <!-- æ ¸å¿ƒæ´è§ -->
            <div class="bg-indigo-50 rounded-xl p-6 mb-6">
                <h3 class="font-bold text-indigo-800 mb-2">ğŸ’¡ æ ¸å¿ƒæ´è§</h3>
                <p class="text-gray-700" id="capsule-insight">åŠ è½½ä¸­...</p>
            </div>

            <!-- æ”¯æ’‘è¯æ® -->
            <div class="mb-6">
                <h3 class="font-bold text-gray-700 mb-2">ğŸ“š æ”¯æ’‘è¯æ®</h3>
                <ul class="list-disc list-inside text-gray-600 space-y-1" id="capsule-evidence">
                </ul>
            </div>

            <!-- è¡ŒåŠ¨å»ºè®® -->
            <div class="mb-6">
                <h3 class="font-bold text-gray-700 mb-2">ğŸ¯ è¡ŒåŠ¨å»ºè®®</h3>
                <ul class="list-decimal list-inside text-gray-600 space-y-1" id="capsule-actions">
                </ul>
            </div>

            <!-- DATM è¯„åˆ† -->
            <div class="bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-6 mb-6">
                <h3 class="font-bold text-gray-700 mb-4 text-center">ğŸ“Š DATM è¯„ä»·</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="text-2xl">ğŸ”¬</div>
                        <div class="text-sm text-gray-500">Truth</div>
                        <div class="text-xl font-bold text-blue-600" id="score-truth">0</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl">âš–ï¸</div>
                        <div class="text-sm text-gray-500">Goodness</div>
                        <div class="text-xl font-bold text-green-600" id="score-goodness">0</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl">ğŸ¨</div>
                        <div class="text-sm text-gray-500">Beauty</div>
                        <div class="text-xl font-bold text-pink-600" id="score-beauty">0</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl">ğŸ’¡</div>
                        <div class="text-sm text-gray-500">Intelligence</div>
                        <div class="text-xl font-bold text-purple-600" id="score-intelligence">0</div>
                    </div>
                </div>
            </div>

            <!-- åˆ†äº«æŒ‰é’® -->
            <div class="flex flex-wrap gap-3 justify-center">
                <button onclick="copyLink()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-full font-bold transition-all">
                    ğŸ“‹ å¤åˆ¶é“¾æ¥
                </button>
                <button onclick="showEmbed()" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-full font-bold transition-all">
                    ğŸ”— åµŒå…¥ä»£ç 
                </button>
                <button onclick="exportHTML()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-full font-bold transition-all">
                    ğŸ’¾ å¯¼å‡º HTML
                </button>
            </div>

            <!-- åµŒå…¥ä»£ç å¼¹çª— -->
            <div id="embed-modal" class="hidden fixed inset-0 bg-black/50 items-center justify-center z-50">
                <div class="bg-white rounded-2xl p-8 max-w-lg w-full mx-4">
                    <h3 class="text-xl font-bold mb-4">åµŒå…¥ä»£ç </h3>
                    <textarea id="embed-code" class="w-full h-32 px-4 py-2 border rounded-lg font-mono text-sm mb-4" readonly></textarea>
                    <div class="flex justify-end gap-3">
                        <button onclick="closeEmbedModal()" class="px-4 py-2 text-gray-600">å…³é—­</button>
                        <button onclick="copyEmbed()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg">å¤åˆ¶</button>
                    </div>
                </div>
            </div>

            <!-- åº•éƒ¨ -->
            <div class="text-center mt-8 pt-6 border-t text-gray-400 text-sm">
                <p>ğŸ”— æ¥è‡ª <a href="/" class="text-indigo-600">SuiLight çŸ¥è¯†æ²™é¾™</a></p>
            </div>
        </div>

        <!-- ç»Ÿè®¡ -->
        <div class="text-center mt-6 text-white/80 text-sm">
            <p id="view-count">0 æ¬¡æµè§ˆ</p>
        </div>
    </div>

    <script>
        // è·å– URL å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const capsuleId = urlParams.get('id') || 'demo';

        // åŠ è½½èƒ¶å›Šæ•°æ®
        async function loadCapsule() {
            // æ¨¡æ‹Ÿæ•°æ®
            const demoData = {
                title: "å…³äºã€ŒAIæ„è¯†ã€çš„èƒ¶å›Š",
                insight: "æ„è¯†å¯èƒ½æœ‰å¤šé‡å½¢æ€ï¼Œæœºå™¨æ„è¯† â‰  äººç±»æ„è¯†ã€‚åŠŸèƒ½æ€§ç­‰ä»·ä¸ç­‰äºæœ¬è´¨ç›¸åŒã€‚",
                evidence: [
                    "ç‰©ç†å­¦è§†è§’: æ„è¯†æ˜¯å¤æ‚ç³»ç»Ÿçš„æ¶Œç°ç°è±¡",
                    "å¿ƒç†å­¦è§†è§’: éœ€è¦æ½œæ„è¯†æ‰èƒ½äº§ç”ŸçœŸæ­£æ„è¯†",
                    "å“²å­¦è§†è§’: é“å¾·æ„Ÿæ˜¯æ„è¯†çš„è¯•é‡‘çŸ³"
                ],
                action_items: [
                    "ç»§ç»­è§‚å¯ŸAIå‘å±•",
                    "ç ”ç©¶æ„è¯†æœ¬è´¨",
                    "å»ºç«‹ä¼¦ç†æ¡†æ¶"
                ],
                dimensions: {
                    truth: 70,
                    goodness: 65,
                    beauty: 60,
                    intelligence: 80
                }
            };

            const data = demoData;

            // æ›´æ–° UI
            document.getElementById('capsule-title').textContent = data.title;
            document.getElementById('capsule-insight').textContent = data.insight;

            // è¯æ®åˆ—è¡¨
            document.getElementById('capsule-evidence').innerHTML = data.evidence
                .map(e => `<li>${e}</li>`).join('');

            // è¡ŒåŠ¨åˆ—è¡¨
            document.getElementById('capsule-actions').innerHTML = data.action_items
                .map(a => `<li>${a}</li>`).join('');

            // è¯„åˆ†
            document.getElementById('score-truth').textContent = data.dimensions.truth;
            document.getElementById('score-goodness').textContent = data.dimensions.goodness;
            document.getElementById('score-beauty').textContent = data.dimensions.beauty;
            document.getElementById('score-intelligence').textContent = data.dimensions.intelligence;

            // ç»Ÿè®¡
            document.getElementById('view-count').textContent = Math.floor(Math.random() * 100) + ' æ¬¡æµè§ˆ';
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href);
            alert('é“¾æ¥å·²å¤åˆ¶ï¼');
        }

        function showEmbed() {
            const embedCode = `<iframe src="${window.location.href}&embed=true" width="400" height="600" frameborder="0" allowfullscreen></iframe>`;
            document.getElementById('embed-code').value = embedCode;
            document.getElementById('embed-modal').classList.remove('hidden');
            document.getElementById('embed-modal').classList.add('flex');
        }

        function closeEmbedModal() {
            document.getElementById('embed-modal').classList.add('hidden');
            document.getElementById('embed-modal').classList.remove('flex');
        }

        function copyEmbed() {
            const code = document.getElementById('embed-code').value;
            navigator.clipboard.writeText(code);
            alert('åµŒå…¥ä»£ç å·²å¤åˆ¶ï¼');
        }

        function exportHTML() {
            const html = document.documentElement.outerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'capsule.html';
            a.click();
            URL.revokeObjectURL(url);
        }

        loadCapsule();
    </script>
</body>
</html>
